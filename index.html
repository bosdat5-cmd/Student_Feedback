<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Student Feedback Form</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    .form-page { display: none; }
    .form-page.active { display: block; }
  </style>
</head>
<body class="bg-gray-100 flex justify-center items-center min-h-screen">
  <div class="w-full max-w-3xl bg-white rounded-lg shadow-lg p-6">
    <h1 class="text-3xl font-bold text-center mb-6">Student Feedback Form</h1>

    <!-- Page 1: Student Info -->
    <div id="page1" class="form-page active">
      <h2 class="text-xl font-semibold mb-4">Student Information</h2>
      <div class="space-y-3">
        <input id="studentName" type="text" placeholder="Student Name" class="w-full border p-2 rounded">
        <input id="regNumber" type="text" placeholder="Registration Number" class="w-full border p-2 rounded">
        <input id="email" type="email" placeholder="Email" class="w-full border p-2 rounded">
        <input id="mobile" type="text" placeholder="Mobile Number" class="w-full border p-2 rounded">
      </div>
      <button onclick="nextPage(2)" class="mt-4 bg-blue-600 text-white px-6 py-2 rounded">Next</button>
    </div>

    <!-- Page 2: Faculty Selection -->
    <div id="page2" class="form-page">
      <h2 class="text-xl font-semibold mb-4">Select Faculty</h2>
      <div id="facultyList" class="grid grid-cols-2 gap-3"></div>
      <button onclick="nextPage(3)" class="mt-4 bg-blue-600 text-white px-6 py-2 rounded">Next</button>
    </div>

    <!-- Page 3: Faculty Feedback (16 Questions) -->
    <div id="page3" class="form-page">
      <h2 class="text-xl font-semibold mb-4">Faculty Feedback</h2>
      <form id="feedbackForm" class="space-y-4">

        <div><label>1. Batch ID</label>
          <input type="text" id="batchId" class="w-full border p-2 rounded">
        </div>

        <div><label>2. Attendance</label>
          <select id="attendance" class="w-full border p-2 rounded">
            <option value="">Select</option><option>Excellent</option><option>Good</option><option>Average</option><option>Poor</option>
          </select>
        </div>

        <div><label>3. Dress Code</label>
          <select id="dressCode" class="w-full border p-2 rounded">
            <option value="">Select</option><option>Excellent</option><option>Good</option><option>Average</option><option>Poor</option>
          </select>
        </div>

        <div><label>4. Discipline</label>
          <select id="discipline" class="w-full border p-2 rounded">
            <option value="">Select</option><option>Excellent</option><option>Good</option><option>Average</option><option>Poor</option>
          </select>
        </div>

        <div><label>5. Class Participation</label>
          <select id="participation" class="w-full border p-2 rounded">
            <option value="">Select</option><option>Excellent</option><option>Good</option><option>Average</option><option>Poor</option>
          </select>
        </div>

        <div><label>6. Teamwork</label>
          <select id="teamwork" class="w-full border p-2 rounded">
            <option value="">Select</option><option>Excellent</option><option>Good</option><option>Average</option><option>Poor</option>
          </select>
        </div>

        <div><label>7. Presentation Content</label>
          <select id="presentationContent" class="w-full border p-2 rounded">
            <option value="">Select</option><option>Excellent</option><option>Good</option><option>Average</option><option>Poor</option>
          </select>
        </div>

        <div><label>8. Presentation Delivery</label>
          <select id="presentationDelivery" class="w-full border p-2 rounded">
            <option value="">Select</option><option>Excellent</option><option>Good</option><option>Average</option><option>Poor</option>
          </select>
        </div>

        <div><label>9. Communication Skills</label>
          <select id="communication" class="w-full border p-2 rounded">
            <option value="">Select</option><option>Excellent</option><option>Good</option><option>Average</option><option>Poor</option>
          </select>
        </div>

        <div><label>10. Analytical Ability</label>
          <select id="analytical" class="w-full border p-2 rounded">
            <option value="">Select</option><option>Excellent</option><option>Good</option><option>Average</option><option>Poor</option>
          </select>
        </div>

        <div><label>11. Creativity & Innovation</label>
          <select id="creativity" class="w-full border p-2 rounded">
            <option value="">Select</option><option>Excellent</option><option>Good</option><option>Average</option><option>Poor</option>
          </select>
        </div>

        <div><label>12. Professional Ethics</label>
          <select id="ethics" class="w-full border p-2 rounded">
            <option value="">Select</option><option>Excellent</option><option>Good</option><option>Average</option><option>Poor</option>
          </select>
        </div>

        <div><label>13. Emotional Intelligence</label>
          <select id="emotional" class="w-full border p-2 rounded">
            <option value="">Select</option><option>Excellent</option><option>Good</option><option>Average</option><option>Poor</option>
          </select>
        </div>

        <div><label>14. Overall Engagement</label>
          <select id="overallEngagement" class="w-full border p-2 rounded">
            <option value="">Select</option><option>Excellent</option><option>Good</option><option>Average</option><option>Poor</option>
          </select>
        </div>

        <div><label>15. Quiz Marks</label>
          <input type="number" id="quizMarks" class="w-full border p-2 rounded">
        </div>

        <div><label>16. Weighted Score / Grade</label>
          <input type="text" id="weightedScore" class="w-full border p-2 rounded" placeholder="Enter score or grade">
        </div>

        <button type="button" onclick="submitFacultyFeedback()" class="bg-green-600 text-white px-6 py-2 rounded">Submit Faculty Feedback</button>
      </form>
    </div>
  </div>

  <script>
    let currentPage = 1;
    let currentFacultyIndex = -1;
    let faculties = ["Sandeep Agarwal", "Faculty 2", "Faculty 3", "Faculty 4", "Faculty 5", "Faculty 6",
                     "Faculty 7", "Faculty 8", "Faculty 9", "Faculty 10", "Faculty 11", "Faculty 12",
                     "Faculty 13", "Faculty 14", "Faculty 15", "Faculty 16"];

    // Go to next page
    function nextPage(page) {
      document.getElementById(`page${currentPage}`).classList.remove("active");
      document.getElementById(`page${page}`).classList.add("active");
      currentPage = page;
      if (page === 2) loadFaculties();
    }

    // Load faculty cards
    function loadFaculties() {
      const container = document.getElementById("facultyList");
      container.innerHTML = "";
      faculties.forEach((f, idx) => {
        const div = document.createElement("div");
        div.className = "border p-3 rounded cursor-pointer hover:bg-blue-100";
        div.innerText = f;
        div.onclick = () => { currentFacultyIndex = idx; alert("Selected: " + f); };
        container.appendChild(div);
      });
    }

    // Submit feedback
    async function submitFacultyFeedback() {
      if (currentFacultyIndex === -1) {
        alert("Please select a faculty first.");
        return;
      }

      let data = {
        studentName: document.getElementById("studentName").value,
        regNumber: document.getElementById("regNumber").value,
        email: document.getElementById("email").value,
        mobile: document.getElementById("mobile").value,
        faculty: faculties[currentFacultyIndex],
        batchId: document.getElementById("batchId").value,
        attendance: document.getElementById("attendance").value,
        dressCode: document.getElementById("dressCode").value,
        discipline: document.getElementById("discipline").value,
        participation: document.getElementById("participation").value,
        teamwork: document.getElementById("teamwork").value,
        presentationContent: document.getElementById("presentationContent").value,
        presentationDelivery: document.getElementById("presentationDelivery").value,
        communication: document.getElementById("communication").value,
        analytical: document.getElementById("analytical").value,
        creativity: document.getElementById("creativity").value,
        ethics: document.getElementById("ethics").value,
        emotional: document.getElementById("emotional").value,
        overallEngagement: document.getElementById("overallEngagement").value,
        quizMarks: document.getElementById("quizMarks").value,
        weightedScore: document.getElementById("weightedScore").value
      };

      try {
        const response = await fetch("https://script.google.com/macros/s/AKfycbw-2oPl0N6o16KLbu6OBdTu0_PZT0sad0YbWDUQhMKFxvIwi8qSw_AU4mw5MIEo3feyug/exec", {
          method: "POST",
          body: JSON.stringify(data),
          headers: { "Content-Type": "application/json" }
        });

        const result = await response.json();
        if (result.status === "success") {
          alert("Feedback submitted successfully for " + faculties[currentFacultyIndex]);
          faculties.splice(currentFacultyIndex, 1); // remove faculty after feedback
          currentFacultyIndex = -1;
          if (faculties.length > 0) {
            nextPage(2);
          } else {
            alert("âœ… All faculties reviewed!");
            location.reload();
          }
        } else {
          alert("Error: " + result.message);
        }
      } catch (err) {
        alert("Error submitting feedback: " + err);
      }
    }
  </script>
</body>
</html>
